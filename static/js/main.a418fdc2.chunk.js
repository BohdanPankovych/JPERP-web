(this.webpackJsonpjaerp=this.webpackJsonpjaerp||[]).push([[0],{241:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(22),c=n.n(s),r=n(16),o=n(39),l=n(26),d={EDIT_REPORTS:"/GardenReport/editReports",PREVIEW_LiST_PAGE:"/GardenReport/preview",EVENTS_LIST_PAGE:"/GardenReport/eventsList"},u={SET_EVENTS:"SET_EVENTS",ADD_EVENT:"ADD_EVENT",DELETE_EVENT:"DELETE_EVENT",SET_GARDEN_GROUPS:"SET_GARDEN_GROUPS"},p=function(e){return{type:u.SET_EVENTS,payload:{events:e}}},j=function(e){return{type:u.ADD_EVENT,payload:{event:e}}},g=n(18),b=n(44),E=n.n(b),h=n(2),m=E()((function(e){return{title:{fontSize:"18px",fontWeight:400},redText:{color:"#FF0000",fontSize:"12px"},conditions:{marginRight:"10px",fontSize:"12px"},select:{fontSize:"12px"}}})),O=function(){var e=m();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{className:e.title,children:"\u7c21\u5358\u30ec\u30dd\u30fc\u30c8"}),Object(h.jsx)("span",{className:e.conditions,children:"\u4f5c\u6210\u6761\u4ef6 "}),Object(h.jsx)("span",{className:e.select,children:" (\u4f5c\u6210\u3059\u308b\u30af\u30e9\u30b9\u3084\u65e5\u306b\u3061\u3092\u9078\u629e) "}),Object(h.jsx)("span",{className:e.redText,children:" \u203b\u7279\u5b9a\u306e\u7d44\u3092\u9078\u629e\u3057\u306a\u3044\u5834\u5408\u306f\u3001\u5712\u5168\u4f53\u306e\u5712\u5168\u4f53\u306e\u6295\u7a3f\u5199\u771f\u304c\u691c\u7d22\u3055\u308c\u307e\u3059"})]})},x=Object(a.memo)(O),f=n(287),v=n(271),T=E()((function(e){return{select:{width:116,height:23},selectTitle:{fontSize:12,marginLeft:10,marginRight:20},selectInput:{"& .MuiOutlinedInput-root":{height:"23px"},"& .MuiOutlinedInput-input":{padding:"5px"},width:"116px"},test:{height:"30px"}}})),S=function(e){var t=e.title,n=e.value,i=e.setValue,s=e.options,c=T(),r=Object(a.useCallback)((function(e){i(e.target.value)}),[]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(f.a,{select:!0,className:c.selectInput,variant:"outlined",value:n,onChange:r,children:null===s||void 0===s?void 0:s.map((function(e){return Object(h.jsx)(v.a,{className:c.test,value:e,children:e},e)}))}),Object(h.jsx)("span",{className:c.selectTitle,children:t})]})},A=Object(a.memo)(S),y=(n.p,n.p,n.p,n.p,n.p,n(290)),R=n(272),C=n(273),I=n(274),D=E()((function(e){return{dialog:{"& .MuiDialog-paperWidthSm":{width:599,height:189},"& .MuiDialogTitle-root":{marginTop:27,textAlign:"center"},"& .MuiDialogActions-root":{marginTop:15,justifyContent:"center"}},btn:{width:"130px",height:"30px"}}})),_=function(e){var t=e.open,n=e.setOpen,a=e.id,i=(e.eventsList,e.deleteEvent),s=D(),c=function(){n(!1)};return Object(h.jsxs)(y.a,{className:s.dialog,open:t,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(h.jsx)(R.a,{id:"alert-dialog-title",children:"\u3053\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u524a\u9664\u3057\u307e\u3059\u304b?"}),Object(h.jsxs)(C.a,{children:[Object(h.jsx)(I.a,{className:s.btn,onClick:function(){i(a),n(!1)},variant:"contained",color:"primary",children:"\u306f\u3044"}),Object(h.jsx)(I.a,{className:s.btn,onClick:c,color:"primary",children:"\u30ad\u30e3\u30f3\u30bb\u30eb"})]})]})},w=Object(a.memo)(_),N=E()((function(e){return{event:{marginTop:62,marginLeft:67,display:"flex",position:"relative"},image:{maxWidth:87,maxHeight:87},imgMain:{width:"auto",height:"auto",maxWidth:"100px",maxHeight:"100px",display:"block"},imgDescriptionBlock:{marginLeft:"37px"},imgTitle:{fontSize:14},imgDescr:{fontSize:12,marginTop:20,width:"70vw"},checkbox:{width:"60px",position:"absolute",top:27,right:125,display:"flex",justifyContent:"space-between"},line:{width:"93vw",border:"1px solid #E2E2E2",marginLeft:"60px",marginTop:"22px"},delete:{cursor:"pointer"},tagList:{display:"flex"},tag:{height:"20px",marginRight:10,color:"#00AE00",border:"1px solid #00AE00",borderRadius:"24px",padding:"4px 10px"}}})),L=function(e){var t=e.deleteEvent,n=e.item,i=e.disable,s=e.handleChange,c=e.selectedCheckbox,r=e.eventsList,o=N(),l=Object(a.useState)(!1),d=Object(g.a)(l,2),u=d[0],p=d[1],j=Object(a.useCallback)((function(e){p(!0)}),[]),b=function(e){for(var t=!1,n=0;n<c.length;n++)if(c[n].docRec.id===e){t=!0;break}return t};return Object(a.useEffect)((function(){}),[c,i]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w,{open:u,setOpen:p,id:n.docRec.id,deleteEvent:t,eventsList:r}),Object(h.jsxs)("div",{className:o.event,children:[Object(h.jsx)("div",{className:o.image,children:Object(h.jsx)("img",{className:o.imgMain,src:n.docRec.mediaSha256,alt:""})}),Object(h.jsxs)("div",{className:o.imgDescriptionBlock,children:[Object(h.jsx)("div",{className:o.tagList,children:n.tags.map((function(e){return Object(h.jsx)("div",{className:o.tag,children:e})}))}),Object(h.jsx)("p",{className:o.imgDescr,children:n.docRec.comment})]}),Object(h.jsxs)("div",{className:o.checkbox,children:[Object(h.jsx)("input",{onChange:function(){return s(n)},selected:b(n.docRec.id),type:"checkbox",disabled:!b(n.docRec.id)&&i}),Object(h.jsx)("img",{onClick:j,className:o.delete,src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgEASABIAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAATAA8DAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD94f2htR/aY+Inxl+Lfwr8K/Gb9trxlpvwo8cxm7j+Bfwx+HugaN4dbxTpKeINC0KTxF4a+IvgzxLrlrp2iamthAfEXnPcSWUt88AuHEzfzjxJV4pzLO84ynCZ3x1jaWUY9c6yDKstw9HDPF0ViMPh3icLmeBxWIjSoVVTj9Zu5ODqOPM+Y/1f8JsJ4OcJ+HvAfG+d+Hn0cOHsZxzw1JUJ+JnGfFeaZhm6yTHSyrM8zhlOccJcQ5PltbF5lg5Yqqso5I0oYmGGjV9lH2a9K/Yy1z9ojSvjr4Y+BXjX40/tYaFDD4N8X/EeHwn+0B8Lvhvc/wDCTaNBMuhSFPGV74z8Z+N1Sy17WbXUbKBLtrFH0ySy229vMyN6nBFfiWjn+FyDHZ5xfQisFjczjg+IspyyX1qhGSw7tjZ47G4+1PEV4VYRU3TTpOn7sZNP476Q+W+E2O8Ms68TOHPDrwMzOpU4hyDhGpnvhXxtxdS/sbMalOWZwUuH8Pw7w9w25YnK8urYTEVJUI4mUcZDE3q1aalH7N/ZU/5On/4KFf8AZVvhL/6qiwr7bhH/AJKzxH/7G+Uf+qimfzz44f8AJkfoof8AZEcef+tziRvin/lJt8J/+zQ/iJ/6svQ6MX/ydHJ/+yOzP/1aYYMk/wCUNOOv+z98I/8ArHZoXPjt+xn+zf8AEv4j6n4/8XfD25ufFviSw0yTX9W0bxz8RfCQ1efToX0qzur+w8I+LdD0y4vYtOs7SzN69kbuaC3hWaaTy1xef8EcMZpmdXMcblsp4zFU6TxFajj8ywftpUoujCdSng8Zh6UpqlCEOdw53GMVKTsjHwx+kL4vcHcIYPhbIeK6NHIsnxWNhleBzDhrhLPfqFLF1I47EUMLis+yHM8bSw88XiK+IWGjiFQp1a1SVOnDnlfp/wBm79k/4A/BfxXrvjn4deA30jxbcaJD4cOvap4t8ceLr+DRLy7a+u9PsX8ZeJfECadFdXVjaS3DaeltLOIVjlkaIsjdfDPCHDuR4vEY/LMvdHGSoRwzxFXGY/GVI0Jz9pOnTeNxWIVJTnTg5OmouXKk21oeL4weOfil4iZHlnDXFvE8cfkNLMambrK8FkXDeQ4WrmOHoLDUMViY8PZPlUsXOhQxNeFFYqVaFL2kpwhGdpL/2Q==",alt:""})]})]}),Object(h.jsx)("div",{className:o.line})]})},k=Object(a.memo)(L);function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return[n,a,i].join(t)}var G=function(e){e.group;var t=e.deleteEvent,n=e.parsedDay,a=e.eventsList,i=e.monthSelect,s=e.yearSelect,c=e.handleChange,r=e.selectedCheckbox,o=e.disable;return Object(h.jsx)(h.Fragment,{children:a.sort((function(e,t){return e-t})).filter((function(e){return n?e.docRec.dateTime.includes(s+"/"+i+"/"+n):e})).filter((function(e){return i?e.docRec.dateTime.includes(s+"/"+i):e})).filter((function(e){return s?e.docRec.dateTime.includes(s):e})).map((function(e){return Object(h.jsx)(k,{deleteEvent:t,item:e,disable:o,handleChange:c,selectedCheckbox:r,eventsList:a})}))})},F=Object(a.memo)(G),V=["",2017,2018,2019,2020,2021],M=n(35),Q=n(288),P=n(175),H=n(177),z=n(275),J=Object(z.a)((function(e){return{root:{"& .MuiOutlinedInput-input":{padding:"4px",paddingLeft:"5px",fontSize:"16px",width:"156px"}}}})),U=function(e){var t=e.disable,n=e.format,a=e.value,i=e.onChange,s=J();return Object(h.jsx)(M.a,{utils:P.a,locale:H.a,children:Object(h.jsx)(Q.a,{disabled:t,autoOk:!0,disableToolbar:!0,className:s.root,variant:"inline",inputVariant:"outlined",value:a,format:n,onChange:i})})},W={SET_SELECTED:"SET_SELECTED",EDIT_EVENT:"EDIT_EVENT",ADD_SELECTED_EVENT:"ADD_SELECTED_EVENT",REMOVE_SELECTED_EVENT:"REMOVE_SELECTED_EVENT",ADD_TAG:"ADD_TAG",SELECT_TAG_ID:"SELECT_TAG_ID",SELECT_CLASS_ID:"SELECT_CLASS_ID",SELECT_CHILD_ID:"SELECT_CHILD_ID",SET_COLOR:"SET_COLOR",SET_TITLE:"SET_TITLE",SET_REPORT_COMMENT:"SET_REPORT_COMMENT",SELECT_CREATOR:"SELECT_CREATOR",RESET_SELECTED_DATA:"RESET_SELECTED_DATA"},K=function(e){return{type:W.SET_SELECTED,payload:{selects:e}}},X=function(e,t){return{type:W.EDIT_EVENT,payload:{eventId:e,eventDescription:t}}},Z=function(){return{type:W.RESET_SELECTED_DATA}},Y={setSelectedEvents:K,editSelectedEvents:X,addSelectedEvent:function(e){return{type:W.ADD_SELECTED_EVENT,payload:{event:e}}},removeSelectedEvent:function(e){return{type:W.REMOVE_SELECTED_EVENT,payload:{eventID:e}}},addTag:function(e){return{type:W.ADD_TAG,payload:{tag:e}}},selectTagId:function(e){return{type:W.SELECT_TAG_ID,payload:{tagId:e}}},selectClassId:function(e){return{type:W.SELECT_CLASS_ID,payload:{classId:e}}},selectChildId:function(e){return{type:W.SELECT_CHILD_ID,payload:{childId:e}}},setEditReportsTitle:function(e){return{type:W.SET_TITLE,payload:{title:e}}},setEditReportsColor:function(e){return{type:W.SET_COLOR,payload:{bgColor:e}}},setEditReportsComment:function(e){return{type:W.SET_REPORT_COMMENT,payload:{description:e}}},setSelectCreator:function(e){return{type:W.SELECT_CREATOR,payload:{creator:e}}},resetSelectedData:Z},q=n(62),$=E()((function(e){return{select:{width:116,height:23},selectTitle:{fontSize:12,marginLeft:10,marginRight:20},selectInput:{"& .MuiOutlinedInput-root":{height:"23px"},"& .MuiOutlinedInput-input":{padding:"5px"},width:"116px"},test:{height:"30px"}}})),ee=function(e){var t=e.disable,n=e.title,i=e.value,s=e.setValue,c=$(),r=Object(a.useCallback)((function(e){s(e.target.value)}),[]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(f.a,{disabled:t,select:!0,className:c.selectInput,variant:"outlined",value:i,onChange:r,children:[Object(h.jsx)(v.a,{className:c.test,value:""}),Object(h.jsx)(v.a,{value:"01",children:"\u4e00\u6708"}),Object(h.jsx)(v.a,{value:"02",children:"\u4e8c\u6708"}),Object(h.jsx)(v.a,{value:"03",children:"\u4e09\u6708"}),Object(h.jsx)(v.a,{value:"04",children:"\u56db\u6708"}),Object(h.jsx)(v.a,{value:"05",children:"\u4e94\u6708"}),Object(h.jsx)(v.a,{value:"06",children:"\u516d\u6708"}),Object(h.jsx)(v.a,{value:"07",children:"\u4e03\u6708"}),Object(h.jsx)(v.a,{value:"08",children:"\u516b\u6708"}),Object(h.jsx)(v.a,{value:"09",children:"\u4e5d\u6708"}),Object(h.jsx)(v.a,{value:"10",children:"\u5341\u6708"}),Object(h.jsx)(v.a,{value:"11",children:"\u5341\u4e00\u6708"}),Object(h.jsx)(v.a,{value:"12",children:"\u5341\u4e8c\u6708"})]}),Object(h.jsx)("span",{className:c.selectTitle,children:n})]})},te=Object(a.memo)(ee),ne=n(60),ae=n.n(ne),ie=window.localStorage.getItem("loginGrant"),se=ie?JSON.parse(ie):null,ce={Authorization:se&&(null===se||void 0===se?void 0:se.token_type)+" "+(null===se||void 0===se?void 0:se.access_token)},re={garden:{getGardenId:function(){return ae.a.get("/api/v1/Garden",{headers:ce})}},eventsList:{getEventsList:function(e,t){return ae.a.post("/api/v1/Garden/".concat(e,"/DocRec/search"),t,{headers:ce})},getClasses:function(){return ae.a.get(" /api/v1/Cls",{headers:ce})},deleteEvent:function(e,t){return ae.a.delete(" /api/v1/Garden/".concat(e,"/DocRec/").concat(t),{headers:ce})}},editPage:{getCreatorsId:function(){return ae.a.get(" /api/v1/Staff/",{headers:ce})},getCreatorName:function(e){return ae.a.get("/api/v1/Usr/".concat(e),{headers:ce})}},previewPage:{getTagList:function(e){return ae.a.get(" /api/v1/Garden/".concat(e,"/DocRec/tags"),{headers:ce})},setApproveEvent:function(e,t){return ae.a.post("/api/v1/Garden/".concat(e,"/DocRec/").concat(t,"/approve"),{headers:ce})}},sharedDialog:{sendReport:function(e,t){return ae.a.post("/api/v1/Garden/".concat(e,"/DocRec"),t,{headers:ce})}}},oe=E()((function(e){return{underHeaderBlock:{marginLeft:30,marginRight:60},selects:{marginTop:20,"& .MuiOutlinedInput-root":{height:"23px",width:"116px"}},fourReports:{color:"#FF0000",fontSize:"12px",position:"absolute",top:20,left:18},flex:{display:"flex",justifyContent:"space-between"},deleteBtn:{width:"130px",height:"30px",background:"#FF0000",color:"white",border:"1px solid #FF0000",borderRadius:"5px",fontSize:"12px"},editReportBtn:{width:"146",height:"30px"},reportBlock:{position:"relative",marginTop:"25px"},selectTitle:{fontSize:12,marginLeft:10,marginRight:20}}})),le=function(e){var t=e.selectedEvents,n=e.gardenGroups,i=e.setGardenGroups,s=(e.setSelectedEvents,e.eventsList),c=e.deleteEvent,r=e.addSelectedEvent,o=e.removeSelectedEvent,l=(e.setEventsListData,oe()),u=Object(a.useState)(""),p=Object(g.a)(u,2),j=p[0],b=p[1],E=Object(a.useState)(""),m=Object(g.a)(E,2),O=m[0],f=m[1],v=Object(a.useState)(""),T=Object(g.a)(v,2),S=T[0],y=T[1],R=Object(a.useState)(""),C=Object(g.a)(R,2),D=C[0],_=C[1],w=Object(a.useState)(""),N=Object(g.a)(w,2),L=N[0],k=N[1],B=Object(a.useState)(null),G=Object(g.a)(B,2),M=(G[0],G[1],Object(a.useState)(!1)),Q=Object(g.a)(M,2),P=Q[0],H=Q[1],z=Object(a.useState)(!0),J=Object(g.a)(z,2),W=J[0],K=J[1],X=Object(a.useState)(!0),Z=Object(g.a)(X,2),Y=Z[0],$=Z[1];Object(a.useEffect)((function(){re.eventsList.getClasses().then((function(e){var t=[];e.data.map((function(e){t.push(e.name)})),i(t)})).catch((function(e){return console.log(e)}))}),[]);return Object(a.useEffect)((function(){t.length>0&&t.length<4?(H(!1),K(!1)):H(!0),0===t.length&&(H(!1),K(!0))}),[t]),Object(a.useEffect)((function(){var e;D&&k(null===(e=D)||void 0===e?void 0:e.getDate()),$(!S||!O)}),[S,O,D]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:l.underHeaderBlock,children:[Object(h.jsx)(x,{}),Object(h.jsxs)("div",{className:l.flex,children:[Object(h.jsxs)("div",{className:l.selects,children:[Object(h.jsx)(A,{title:"\u7d44",options:n,value:j,setValue:b}),Object(h.jsx)(A,{title:"\u5e74",options:V,value:S,setValue:y}),Object(h.jsx)(te,{title:"\u6708",setValue:f,value:O}),Object(h.jsx)(U,{disable:Y,format:"dd",value:D||(O&&S?"".concat(S,"/").concat(O):null),onChange:_}),Object(h.jsx)("span",{className:l.selectTitle,children:"\u65e5"})]}),Object(h.jsx)("div",{className:l.reportBlock,children:Object(h.jsxs)("div",{className:l.btns,children:[Object(h.jsx)(I.a,{component:q.b,to:d.EDIT_REPORTS,className:l.editReportBtn,disabled:W,variant:"contained",color:"primary",children:"\u7c21\u5358\u30ec\u30dd\u30fc\u30c8\u3092\u7de8\u96c6"}),W?Object(h.jsx)("p",{className:l.fourReports,children:"\u203b\u4e00\u5ea6\u306b\u9078\u3079\u308b\u30ec\u30dd\u30fc\u30c8\u306f4\u70b9\u307e\u3067\u3067\u3059\u3002"}):null]})})]})]}),Object(h.jsx)(F,{eventsList:s,group:j,monthSelect:O,parsedDay:L,deleteEvent:c,yearSelect:S,handleChange:function(e){for(var n=!1,a=0;a<(null===t||void 0===t?void 0:t.length);a++)if(t[a].docRec.id===e.docRec.id){n=!0;break}n?o(e.docRec.id):(console.log(e),r(e))},selectedCheckbox:t,disable:P,setDisable:H})]})},de=Object(a.memo)(le),ue=Object(r.a)(Object(r.a)({},Y),{},{setEventsListData:p,deleteEvent:function(e){return{type:u.DELETE_EVENT,payload:{eventID:e}}},setGardenGroups:function(e){return{type:u.SET_GARDEN_GROUPS,payload:{groups:e}}}}),pe=Object(o.b)((function(e){var t,n;return{eventsList:null===(t=e.eventsList.get("events"))||void 0===t?void 0:t.toJS(),selectedEvents:null===(n=e.selectedEvents.get("selects"))||void 0===n?void 0:n.toJS(),gardenGroups:e.eventsList.get("groups")}}),ue)((function(e){return Object(h.jsx)(de,Object(r.a)({},e))})),je=n(13),ge=function(e){return e||"number"===typeof e?void 0:"\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u7a7a\u306b\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093!"},be=function(e){return(null===e||void 0===e?void 0:e.length)>200?"(200\u6587\u5b57\u307e\u3067\u5165\u529b\u53ef\u80fd)":void 0},Ee=["#CC4338","#E37067","#538DD5","#95B3D7","#DA9694","#C4D79B","#B1A0C7","#92CDDC","#FBE5D6"],he=n(47),me=["value","validators","onChange","onValueChange","showError","className"],Oe=Object(z.a)((function(e){return{root:{padding:"10px","& p":{padding:"2px",fontSize:"0.75em",position:"absolute",top:0,lineHeight:"15px",backgroundColor:"white"}}}})),xe=function(e){var t=e.value,n=e.validators,a=(e.onChange,e.onValueChange),s=e.showError,c=e.className,o=Object(he.a)(e,me),l=Oe(),d=i.a.useState(!1),u=Object(g.a)(d,2),p=u[0],j=u[1],b=(n||[]).map((function(e){return e(t)})).find((function(e){return null!=e}));i.a.useEffect((function(){s&&j(!0)}),[s]);return Object(h.jsx)(f.a,Object(r.a)({className:l.root+" "+c,value:t,error:p&&!!b,onChange:function(e){!function(e){j(!0),a&&a(e)}(e.target.value)},helperText:p&&b?b:""},o))},fe=Object(z.a)((function(e){var t;return{root:Object(je.a)({display:"flex",margin:"10px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"center"}),imgContainer:{maxWidth:100,maxHeight:100,display:"flex",justifyContent:"center"},img:{margin:"20px 10px 0",width:"auto",height:"auto",maxWidth:"100px",maxHeight:"100px",display:"block"},text:(t={},Object(je.a)(t,e.breakpoints.down("sm"),{fontSize:"10px"}),Object(je.a)(t,"padding","10px"),Object(je.a)(t,"width","45vw"),Object(je.a)(t,e.breakpoints.down("sm"),{width:"80vw"}),t),title:{margin:0}}})),ve=function(e){var t=e.data,n=e.showError,a=e.editSelectedEvents,i=fe();return Object(h.jsxs)("div",{className:i.root,children:[Object(h.jsx)("div",{className:i.imgContainer,children:Object(h.jsx)("img",{className:i.img,width:"auto",height:"100",alt:"img",src:t.docRec.mediaSha256})}),Object(h.jsx)("div",{children:Object(h.jsx)(xe,{multiline:!0,minRows:"4",variant:"outlined",className:i.text,value:null===t||void 0===t?void 0:t.docRec.comment,onValueChange:function(e){a(t.docRec.id,e)},showError:n,validators:[ge,be]})})]})},Te=Object(z.a)((function(e){return{input:{display:"none","&:checked+label":{"& span":{transform:"scale(1.25) translate(-2%, -2%)",border:"1px solid black"}}},label:{display:"inline-block",width:"25px",height:"25px",cursor:"pointer",marginRight:"15px","&:hover":{"& span":{transform:"scale(1.25) translate(-2%, -2%)"}},"& span":{display:"block",width:"100%",height:"100%",borderRadius:"50%",transition:"transform .2s ease-in-out"}}}})),Se=function(e){var t=e.color,n=e.selectedColor,a=e.setColor,i=Te();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("input",{className:i.input,onChange:function(){return a(t)},checked:t===n,type:"radio",name:"color",id:t}),Object(h.jsx)("label",{className:i.label,htmlFor:t,children:Object(h.jsx)("span",{style:{backgroundColor:t}})})]})},Ae=Object(z.a)((function(e){var t;return{root:{padding:"10px"},optionText:{margin:0,fontSize:"12px"},title:Object(je.a)({fontSize:"18px"},e.breakpoints.down("sm"),{fontSize:"12px"}),titleWrapper:{display:"flex",alignItems:"center",marginBottom:"10px"},input:Object(je.a)({"& .MuiOutlinedInput-input":{padding:"5px"},"& p":{fontSize:"0.5em"},height:"100%",marginLeft:"7px"},e.breakpoints.down("sm"),{width:"150px"}),selectInput:{"& .MuiOutlinedInput-input":{padding:"5px"},width:"165px",marginLeft:"50px"},content:Object(je.a)({display:"flex"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"center"}),commentTitle:{marginTop:0},commentContent:{paddingTop:"25px"},commentText:Object(je.a)({width:"45vw"},e.breakpoints.down("sm"),{width:"80vw"}),header:(t={display:"flex"},Object(je.a)(t,e.breakpoints.down("sm"),{flexDirection:"column"}),Object(je.a)(t,"justifyContent","space-between"),t),headerButton:Object(je.a)({display:"flex",justifyContent:"flex-start",alignItems:"center",flexDirection:"column",marginTop:"70px"},e.breakpoints.down("sm"),{marginTop:"20px",width:"100%",alignItems:"center"}),button:Object(je.a)({marginRight:"80px",padding:"5px 15px","&:hover":{backgroundColor:"#1db51d"}},e.breakpoints.down("sm"),{marginRight:"20px",fontSize:8,width:"60vw"}),list:Object(je.a)({display:"flex",flexDirection:"column",alignItems:"flex-end",padding:"5px 0"},e.breakpoints.down("sm"),{alignItems:"center"}),notification:{color:"red",fontSize:"12px"}}})),ye=function(e){var t=e.timeFilter,n=e.selectedEvents,s=e.title,c=e.creators,r=e.selectCreator,o=e.bgColor,u=e.description,p=e.setTimeFilter,j=(e.setEditReportsCreators,e.setEditReportsData,e.setEditReportsTitle),b=e.setEditReportsColor,E=e.setEditReportsComment,m=e.setSelectCreator,O=e.editSelectedEvents,x=e.addCreator,f=Ae(),T=i.a.useState(!1),S=Object(g.a)(T,2),A=S[0],y=S[1],R=Object(a.useState)(!0),C=Object(g.a)(R,2),D=C[0],_=C[1],w=Object(l.f)();Object(a.useEffect)((function(){re.editPage.getCreatorsId().then((function(e){return e.data.map((function(e){return re.editPage.getCreatorName(e.usrId).then((function(t){return x({id:e.usrId,name:t.data.familyName})})).catch((function(e){return console.error(e)}))}))})).catch((function(e){return console.error(e)}))}),[]);Object(a.useEffect)((function(){s&&u&&r&&u.length<=200&&n.every((function(e){return e.docRec.comment.length>0&&e.docRec.comment.length<=200}))?_(!1):_(!0)}),[s,u,r,n]);return Object(h.jsxs)("div",{className:f.root,children:[Object(h.jsxs)("div",{className:f.header,children:[Object(h.jsxs)("div",{className:f.headerOptions,children:[Object(h.jsx)("p",{children:"\u7c21\u5358\u30ec\u30dd\u30fc\u30c8"}),Object(h.jsxs)("div",{className:f.titleWrapper,children:[Object(h.jsx)("p",{className:f.title,children:"\u30bf\u30a4\u30c8\u30eb:"}),Object(h.jsx)(xe,{variant:"outlined",className:f.input,onValueChange:j,value:s,showError:A,validators:[ge]})]}),Object(h.jsxs)("div",{className:f.titleWrapper,children:[Object(h.jsx)("p",{className:f.optionText,children:"\u30ec\u30dd\u30fc\u30c8\u8868\u793a\u65e5\uff1a"}),Object(h.jsx)(U,{format:"yyyy/MM/dd",value:t.day,onChange:p})]}),Object(h.jsxs)("div",{className:f.titleWrapper,children:[Object(h.jsx)("p",{className:f.optionText,children:"\u4f5c\u6210\uff1a"}),Object(h.jsx)(xe,{select:!0,className:f.selectInput,variant:"outlined",value:r,onValueChange:function(e){m(e)},showError:A,validators:[ge],children:c.map((function(e){return Object(h.jsx)(v.a,{value:e.name,children:e.name},e.id)}))})]}),Object(h.jsx)("p",{children:"\u30ec\u30dd\u30fc\u30c8\u306e\u80cc\u666f\u8272\u3092\u9078\u629e\uff1a"}),Ee.map((function(e){return Object(h.jsx)(Se,{color:e,selectedColor:o,setColor:b},e)}))]}),Object(h.jsxs)("div",{className:f.headerButton,children:[Object(h.jsx)(I.a,{disabled:D,className:f.button,variant:"contained",color:"primary",onClick:function(){s&&u?(y(!1),w.push(d.PREVIEW_LiST_PAGE)):y(!0)},children:"\u30d7\u30ec\u30d3\u30e5\u30fc\u3092\u78ba\u8a8d"}),D&&Object(h.jsx)("p",{className:f.notification,children:"\u3059\u3079\u3066\u306e\u5fc5\u9808\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u5165\u529b\u3057\u307e\u3059"})]})]}),Object(h.jsxs)("div",{className:f.content,children:[Object(h.jsx)("div",{className:f.list,children:n&&n.map((function(e,t){return Object(h.jsx)(ve,{data:e,showError:A,editSelectedEvents:O},e.id+"_"+t)}))}),Object(h.jsxs)("div",{className:f.commentContent,children:[Object(h.jsx)("p",{className:f.commentTitle,children:"\u5148\u751f\u306e\u30b3\u30e1\u30f3\u30c8"}),Object(h.jsx)(xe,{className:f.commentText,multiline:!0,minRows:"4",showError:A,variant:"outlined",value:u,onValueChange:E,validators:[ge,be]})]})]})]})},Re=Object(a.memo)(ye),Ce={SET_TIME_FILTER:"SET_TIME_FILTER",SET_GARDEN_ID:"SET_GARDEN_ID",SET_GARDEN_NAME:"SET_GARDEN_NAME",SHOW_TAGS_DIALOG:"SHOW_TAGS_DIALOG"},Ie=function(e){return{type:Ce.SET_TIME_FILTER,payload:{timeFilter:e}}},De=function(e){return{type:Ce.SHOW_TAGS_DIALOG,payload:{isShown:e}}},_e={setTimeFilter:Ie,setGardenId:function(e){return{type:Ce.SET_GARDEN_ID,payload:{gardenId:e}}},setGardenName:function(e){return{type:Ce.SET_GARDEN_NAME,payload:{gardenName:e}}},showTagsDialog:De},we={SET_REPORTS:"SET_REPORTS",SET_CREATORS:"SET_CREATORS",ADD_CREATOR:"ADD_CREATOR"},Ne={setEditReportsData:function(e){return{type:we.SET_REPORTS,payload:{reports:e}}},setEditReportsCreators:function(e){return{type:we.SET_CREATORS,payload:{creators:e}}},addCreator:function(e){return{type:we.ADD_CREATOR,payload:{creator:e}}}},Le=Object(r.a)(Object(r.a)({setTimeFilter:Ie,setSelectedEvents:K,editSelectedEvents:X},Ne),Y),ke=Object(o.b)((function(e){var t,n,a;return{reportsList:null===(t=e.reportsList.get("reports"))||void 0===t?void 0:t.toJS(),selectedEvents:null===(n=e.selectedEvents.get("selects"))||void 0===n?void 0:n.toJS(),creators:null===(a=e.reportsList.get("creators"))||void 0===a?void 0:a.toJS(),timeFilter:e.common.get("timeFilter").toJS(),title:e.selectedEvents.get("title"),bgColor:e.selectedEvents.get("bgColor"),description:e.selectedEvents.get("description"),selectCreator:e.selectedEvents.get("selectCreator")}}),Le)((function(e){return Object(h.jsx)(Re,Object(r.a)({},e))})),Be={SET_IMAGE:"SET_IMAGE",SET_DESCRIPRTION:"SET_DESCRIPRTION",SET_APPROVE:"SET_APPROVE",SET_TAG:"SET_TAG",SET_DESTINATION:"SET_DESTINATION",SET_CHILD_TAGS:"SET_CHILD_TAGS",SET_GENERAL_TAGS:"SET_GENERAL_TAGS"},Ge=function(e){return{type:Be.SET_IMAGE,payload:{image:e}}},Fe={setShareReportsImage:Ge,setShareReportsDescription:function(e){return{type:Be.SET_DESCRIPRTION,payload:{description:e}}},setShareReportsApprove:function(e){return{type:Be.SET_APPROVE,payload:{approve:e}}},setTextTag:function(e){return{type:Be.SET_TAG,payload:{tag:e}}},setDestination:function(e){return{type:Be.SET_DESTINATION,payload:{destination:e}}},setChildTags:function(e){return{type:Be.SET_CHILD_TAGS,payload:{kids:e}}},setGeneralTags:function(e){return{type:Be.SET_GENERAL_TAGS,payload:{tags:e}}}},Ve=n(85),Me=n(279),Qe=n(292),Pe=n(169),He=n.n(Pe),ze=n(34),Je=["img","x","y","text"],Ue=function(e){var t=e.img,n=e.x,a=e.y,i=e.text,s=Object(he.a)(e,Je),c=He()(t),o=Object(g.a)(c,1)[0],l=function(e,t,n,a){var i,s;return t>e?(i=n,s=a,i=n/(t/(e/n)/a)):(s=a,i=n,s=a/(e/(t/a)/n)),{adaptedWidth:i,adaptedHeight:s}}(null===o||void 0===o?void 0:o.naturalWidth,null===o||void 0===o?void 0:o.naturalHeight,150,140),d=l.adaptedWidth,u=l.adaptedHeight;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ze.b,Object(r.a)({image:o,width:d,height:u,x:n,y:a,stroke:"white",strokeWidth:10,cornerRadius:10},s)),Object(h.jsx)(ze.f,{x:n,y:a+u+5,width:200,text:i,fontSize:8.5})]})},We=function(e){var t,n,a,i,s,c,r,o,l=e.backgroundColor,d=e.selectedEvents,u=e.width,p=e.height,j=e.description,g=e.title,b=e.date,E=e.selectCreator,m=e.schoolName,O=e.reference;return Object(h.jsx)(ze.e,{width:u,height:p,ref:O,children:Object(h.jsxs)(ze.c,{children:[Object(h.jsx)(ze.d,{x:0,y:0,width:u,height:p,fill:l}),Object(h.jsx)(ze.d,{x:40,y:30,width:u-80,height:50,fill:"#F57F34",cornerRadius:10}),Object(h.jsx)(ze.f,{x:50,y:45,text:g,fontSize:24,fill:"white",fontStyle:"bold"}),Object(h.jsx)(ze.f,{x:u-150,y:15,text:b,fontSize:15}),Object(h.jsx)(ze.f,{x:u-130,y:60,text:E,fontSize:12}),Object(h.jsx)(ze.f,{x:50,y:15,text:m,fontSize:16}),Object(h.jsx)(ze.a,{x:150,y:230,radius:60,fill:"white"}),Object(h.jsx)(ze.a,{x:150,y:530,radius:60,fill:"white"}),Object(h.jsx)(ze.a,{x:350,y:200,radius:60,fill:"white"}),Object(h.jsx)(Ue,{x:70,y:90,img:null===(t=d[0])||void 0===t?void 0:t.docRec.mediaSha256,text:null===(n=d[0])||void 0===n?void 0:n.docRec.comment}),Object(h.jsx)(Ue,{x:70,y:360,img:null===(a=d[1])||void 0===a?void 0:a.docRec.mediaSha256,text:null===(i=d[1])||void 0===i?void 0:i.docRec.comment}),Object(h.jsx)(Ue,{x:290,y:90,img:null===(s=d[2])||void 0===s?void 0:s.docRec.mediaSha256,text:null===(c=d[2])||void 0===c?void 0:c.docRec.comment}),Object(h.jsx)(Ue,{x:290,y:360,img:null===(r=d[3])||void 0===r?void 0:r.docRec.mediaSha256,text:null===(o=d[3])||void 0===o?void 0:o.docRec.comment}),Object(h.jsx)(ze.d,{x:35,y:p-125,width:u-70,height:110,fill:"white",stroke:"#F57F34",strokeWidth:3,cornerRadius:10}),Object(h.jsx)(ze.f,{x:45,width:u-85,y:p-120,text:j,fontSize:12})]})})},Ke=n(171),Xe=Object(z.a)((function(e){return{root:{display:"flex",margin:"10px"},content:{width:"100%",display:"flex",justifyContent:"center"},bottom:{display:"flex",justifyContent:"center"},button:{margin:"10px"},title:{marginLeft:"20px",marginTop:"10px"},returnButton:{marginLeft:"20px",marginTop:"15px"},canvas:{backgroundColor:"gray"}}})),Ze=function(e){var t=e.selectCreator,n=e.showTagsDialog,i=e.gardenName,s=e.timeFilter,c=e.title,r=e.bgColor,o=e.description,u=e.selectedEvents,p=(e.addEvent,e.setShareReportsImage),j=(e.resetSelectedData,Object(a.useRef)(null)),g=(Object(l.f)(),Xe());return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ve.a,{className:g.title,children:"\u7c21\u5358\u30ec\u30dd\u30fc\u30c8"}),Object(h.jsx)(I.a,{className:g.returnButton,variant:"contained",color:"primary",component:q.b,to:d.EDIT_REPORTS,children:"\u7de8\u96c6\u753b\u9762\u3078\u623b\u308b"}),Object(h.jsx)(Me.a,{className:g.content,children:Object(h.jsx)(We,{reference:j,className:g.canvas,width:530,height:750,backgroundColor:r,title:c,date:null===s||void 0===s?void 0:s.day,description:o,selectCreator:t,selectedEvents:u,schoolName:i})}),Object(h.jsx)(Me.a,{className:g.bottom,children:Object(h.jsxs)(Qe.a,{children:[Object(h.jsx)(I.a,{className:g.button,onClick:function(){var e=new Ke.a;e.addImage(j.current.toDataURL({pixelRatio:1.5}),0,0),e.save("".concat(c,"_report.pdf"))},variant:"outlined",color:"primary",children:"PDF\u3067\u4fdd\u5b58"}),Object(h.jsx)(I.a,{className:g.button,variant:"contained",color:"primary",onClick:function(){p(j.current.toDataURL({pixelRatio:1.5})),n(!0)},children:"\u4fdd\u8b77\u8005\u3068\u5171\u6709"})]})})]})},Ye=Object(a.memo)(Ze),qe=Object(r.a)({setTimeFilter:Ie,setSelectedEvents:K,addEvent:j,setShareReportsImage:Ge,showTagsDialog:De,resetSelectedData:Z},Ne),$e=Object(o.b)((function(e){var t;return{timeFilter:e.common.get("timeFilter"),gardenName:e.common.get("gardenName"),title:e.selectedEvents.get("title"),bgColor:e.selectedEvents.get("bgColor"),description:e.selectedEvents.get("description"),selectCreator:e.selectedEvents.get("selectCreator"),selectedEvents:null===(t=e.selectedEvents.get("selects"))||void 0===t?void 0:t.toJS()}}),qe)((function(e){return Object(h.jsx)(Ye,Object(r.a)({},e))})),et=n(172),tt=n.n(et),nt=n(173),at=n.n(nt),it=n(285),st=n(286),ct=n(278),rt=n(277),ot=n(276),lt=n(293),dt=n(270),ut=n(246),pt=n(280),jt=n(283),gt=n(281),bt=n(282),Et=["children","id","onClick","className","setTag","selected","setSelected"],ht=Object(z.a)((function(e){return{root:{borderRadius:"45px",marginRight:"10px"}}})),mt=function(e){var t=e.children,n=e.id,a=(e.onClick,e.className),s=e.setTag,c=e.selected,o=(e.setSelected,Object(he.a)(e,Et)),l=ht(),d=i.a.useState(!1),u=Object(g.a)(d,2);u[0],u[1];return Object(h.jsx)(I.a,Object(r.a)(Object(r.a)({className:l.root+" "+a,variant:c?"contained":"outlined",onClick:function(){s(n)},color:"primary"},o),{},{children:t}))},Ot=["title","selectedTags","tags"],xt=Object(z.a)((function(e){return{tagsList:{paddingLeft:e.spacing(4),margin:"5px 0"}}})),ft=function(e){var t=e.title,n=e.selectedTags,a=e.tags,s=Object(he.a)(e,Ot),c=xt(),o=i.a.useState(!1),l=Object(g.a)(o,2),d=l[0],u=l[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(ut.a,{button:!0,onClick:function(){u(!d)},children:[Object(h.jsx)(pt.a,{primary:t}),d?Object(h.jsx)(gt.a,{}):Object(h.jsx)(bt.a,{})]}),Object(h.jsx)(jt.a,{in:d,timeout:"auto",unmountOnExit:!0,children:Object(h.jsx)(Qe.a,{className:c.tagsList,children:a&&a.map((function(e,t){return Object(h.jsx)(mt,Object(r.a)(Object(r.a)({id:e.id||e,selected:n.includes(e.id||e)},s),{},{children:e.name||e}),e.id||t)}))})})]})},vt=Object(a.memo)(ft),Tt=["select","tagKind","onButtonClick","children","className","setDestination"],St=Object(z.a)((function(e){return{root:{borderRadius:"45px",marginRight:"10px"}}})),At=function(e){var t=e.select,n=e.tagKind,a=e.onButtonClick,i=e.children,s=e.className,c=e.setDestination,o=Object(he.a)(e,Tt),l=St();return Object(h.jsx)(I.a,Object(r.a)(Object(r.a)({className:l.root+" "+s,variant:t===i?"contained":"outlined",onClick:function(){a(i),c(n)},color:"primary"},o),{},{children:i}))},yt=Object(a.memo)(At),Rt=Object(z.a)((function(e){return{tagsList:{paddingLeft:e.spacing(4),margin:"5px 0"}}})),Ct=function(e){var t=e.tags,n=e.setDestination,a=Rt(),s=i.a.useState(!1),c=Object(g.a)(s,2),r=c[0],o=c[1],l=i.a.useState(""),d=Object(g.a)(l,2),u=d[0],p=d[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(ut.a,{button:!0,onClick:function(){o(!r)},children:[Object(h.jsx)(pt.a,{primary:null===t||void 0===t?void 0:t.parent.name}),r?Object(h.jsx)(gt.a,{}):Object(h.jsx)(bt.a,{})]}),Object(h.jsx)(jt.a,{in:r,timeout:"auto",unmountOnExit:!0,children:Object(h.jsx)(Qe.a,{className:a.tagsList,children:null===t||void 0===t?void 0:t.children.map((function(e){return Object(h.jsx)(yt,{tagKind:e.tagKind,onButtonClick:p,select:u,color:"primary",setDestination:n,children:e.name},e.id)}))})})]})},It=Object(a.memo)(Ct),Dt=Object(z.a)((function(e){return{tagsList:{paddingLeft:e.spacing(4),margin:"5px 0"}}})),_t=function(e){var t=e.tags,n=e.selectedTags,a=e.title,s=e.setTag,c=Dt(),r=i.a.useState(!1),o=Object(g.a)(r,2),l=o[0],d=o[1],u=i.a.useState(null),p=Object(g.a)(u,2),j=p[0],b=p[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(ut.a,{button:!0,onClick:function(){d(!l)},children:[Object(h.jsx)(pt.a,{primary:a}),l?Object(h.jsx)(gt.a,{}):Object(h.jsx)(bt.a,{})]}),Object(h.jsxs)(jt.a,{in:l,timeout:"auto",unmountOnExit:!0,children:[Object(h.jsx)(Qe.a,{className:c.tagsList,children:t&&t.map((function(e){return Object(h.jsx)(I.a,{color:j===e.parent.name?"primary":"default",onClick:function(){return t=e.parent.name,void b(t);var t},children:e.parent.name},e.parent.id)}))}),Object(h.jsx)(Qe.a,{className:c.tagsList,children:t.map((function(e){if(j===e.parent.name)return e.children.map((function(e){return Object(h.jsx)(mt,{id:e.id,setTag:s,selected:n.includes(e.id),children:e.name},e.id)}))}))})]})]})},wt=Object(a.memo)(_t),Nt=["title","selectedTags","tags"],Lt=Object(z.a)((function(e){return{tagsList:{paddingLeft:e.spacing(4),margin:"5px 0"}}})),kt=function(e){var t=e.title,n=e.selectedTags,a=e.tags,s=Object(he.a)(e,Nt),c=Lt(),o=i.a.useState(!1),l=Object(g.a)(o,2),d=l[0],u=l[1],p=i.a.useState([]),j=Object(g.a)(p,2),b=(j[0],j[1]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(ut.a,{button:!0,onClick:function(){u(!d)},children:[Object(h.jsx)(pt.a,{primary:t}),d?Object(h.jsx)(gt.a,{}):Object(h.jsx)(bt.a,{})]}),Object(h.jsx)(jt.a,{in:d,timeout:"auto",unmountOnExit:!0,children:Object(h.jsx)(Qe.a,{className:c.tagsList,children:a&&a.map((function(e){return Object(h.jsx)(mt,Object(r.a)(Object(r.a)({id:e.parent.id,setSelected:b,selected:n.includes(e.parent.id)},s),{},{children:e.parent.name}),e.parent.id)}))})})]})},Bt=Object(a.memo)(kt),Gt=Object(z.a)((function(e){return{textInput:{width:"98%",marginLeft:"10px"}}})),Ft=function(e){var t=e.clsChildTags,n=e.generalTags,s=e.addTag,c=e.setDestination,r=e.setChildTags,o=e.setGeneralTags,l=e.setTextTag,d=e.selectTagId,u=e.selectClassId,p=e.selectChildId,j=e.textTags,b=e.tagIds,E=e.clsIds,m=e.childIds,O=e.gardenId,x=Gt(),v=Object(a.useState)(""),T=Object(g.a)(v,2),S=T[0],A=T[1];i.a.useEffect((function(){re.previewPage.getTagList(O).then((function(e){r(e.data.clsChildTags),o(e.data.generalTags)})).catch((function(e){return console.error(e)}))}),[]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(dt.a,{children:[n&&Object(h.jsx)(It,{setDestination:c,tags:null===n||void 0===n?void 0:n[0]}),t&&Object(h.jsx)(Bt,{title:"\u30af\u30e9\u30b9",setTag:u,tags:t,selectedTags:E}),t&&Object(h.jsx)(wt,{title:"\u5b50\u4f9b",setTag:p,tags:t,selectedTags:m}),n&&n.slice(1).map((function(e){return Object(h.jsx)(vt,{setTag:d,title:e.parent.name,tags:e.children,selectedTags:b},e.parent.id)})),Object(h.jsx)(vt,{title:"\u90fd\u5ea6\u8a2d\u5b9a",setTag:l,color:"secondary",tags:j,selectedTags:j})]}),Object(h.jsx)("hr",{}),Object(h.jsx)(f.a,{className:x.textInput,value:S,onChange:function(e){return A(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(s(S),A(""))}})]})},Vt=Object(a.memo)(Ft),Mt=Object(r.a)(Object(r.a)({},Fe),Y),Qt=Object(o.b)((function(e){var t,n;return{clsChildTags:null===(t=e.shareReports.get("clsChildTags"))||void 0===t?void 0:t.toJS(),generalTags:null===(n=e.shareReports.get("generalTags"))||void 0===n?void 0:n.toJS(),destination:e.shareReports.get("destination"),textTags:e.selectedEvents.get("textTags"),tagIds:e.selectedEvents.get("tagIds"),clsIds:e.selectedEvents.get("clsIds"),childIds:e.selectedEvents.get("childIds"),gardenId:e.common.get("gardenId")}}),Mt)((function(e){return Object(h.jsx)(Vt,Object(r.a)({},e))})),Pt=n(284);function Ht(e){var t=e.title,n=e.text,a=e.open,i=e.onClose,s=function(){i(!1)};return Object(h.jsxs)(y.a,{open:a,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(h.jsx)(R.a,{id:"alert-dialog-title",children:t}),Object(h.jsx)(ot.a,{children:Object(h.jsx)(Pt.a,{id:"alert-dialog-description",children:n})}),Object(h.jsx)(C.a,{children:Object(h.jsx)(I.a,{onClick:s,color:"primary",autoFocus:!0,children:"Ok"})})]})}var zt=Object(z.a)((function(e){return{appBar:{position:"relative",backgroundColor:"#F6F6F6"},input:{display:"none"},toolBar:{display:"flex",justifyContent:"space-between"},closeButton:{color:"#00AF10"},text:{color:"black"},content:{padding:0,display:"flex",justifyContent:"space-between",backgroundColor:"#f5f2f0",width:"100vw",height:"100%"},leftSide:{display:"flex",flexDirection:"column",width:"30vw",padding:"15px"},imgPreview:{width:"auto",height:"auto",maxHeight:"20vh"},previewContainer:{backgroundColor:"white",border:"1px solid #bdbdbd",borderRadius:"5px",width:"100%",minHeight:"25vh",marginBottom:"15px",display:"flex",justifyContent:"center",alignItems:"center"},confirm:{padding:0,backgroundColor:"white",border:"1px solid #bdbdbd",borderRadius:"5px",display:"flex",justifyContent:"flex-start",alignItems:"center"},textAreaText:{margin:"15px 0",borderRadius:"1px",fontSize:"16px",backgroundColor:"white"},button:{width:"100%","&:hover":{backgroundColor:"#1db51d"}},rightSide:{backgroundColor:"white",border:"1px solid #bdbdbd",borderRadius:"5px",width:"70vw",height:"fit-content",marginRight:"10px",paddingBottom:"10px"},saveButton:{position:"absolute",right:"50px",bottom:"50px",backgroundColor:"#00AF10",color:"white","&:hover":{backgroundColor:"#18d629"}}}})),Jt=i.a.forwardRef((function(e,t){return Object(h.jsx)(it.a,Object(r.a)({direction:"up",ref:t},e))})),Ut=function(e){var t,n=e.open,a=e.newEvent,s=e.destination,c=e.handleClose,r=e.approve,o=e.description,u=e.image,p=e.addEvent,j=e.setShareReportsImage,b=e.setShareReportsApprove,E=(e.setSelectedEvents,e.setShareReportsDescription),m=e.setDestination,O=e.gardenId,x=e.resetSelectedData,f=e.clsIds,v=e.childIds,T=e.textTags,S=e.tagIds,A=zt(),R=Object(l.f)(),C=i.a.useState(!1),D=Object(g.a)(C,2),_=D[0],w=D[1],N=i.a.useState(!1),L=Object(g.a)(N,2),k=L[0],B=L[1];return Object(h.jsxs)(y.a,{fullScreen:!0,open:n,onClose:c,TransitionComponent:Jt,children:[Object(h.jsx)(st.a,{className:A.appBar,children:Object(h.jsxs)(ct.a,{className:A.toolBar,children:[Object(h.jsx)(Ve.a,{className:A.text,children:"\u7c21\u5358\u30ec\u30dd\u30fc\u30c8"}),Object(h.jsx)(rt.a,{className:A.closeButton,edge:"end",onClick:c,"aria-label":"close",children:Object(h.jsx)(tt.a,{})})]})}),Object(h.jsxs)(ot.a,{className:A.content,children:[Object(h.jsxs)(Qe.a,{className:A.leftSide,children:[Object(h.jsx)(Me.a,{className:A.previewContainer,children:null!=u?Object(h.jsx)("img",{className:A.imgPreview,src:u,alt:"preview"}):Object(h.jsx)(Ve.a,{children:"\u753b\u50cf\u7121\u3057"})}),Object(h.jsx)("input",{className:A.input,onChange:function(e){try{var t=e.target.files[0];j(URL.createObjectURL(t))}catch(n){console.error(n)}},id:"contained-button-file",type:"file",accept:".jpg, .jpeg, .png, .jfif"}),Object(h.jsx)("label",{htmlFor:"contained-button-file",children:Object(h.jsx)(I.a,(t={className:A.button,variant:"outlined",color:"primary"},Object(je.a)(t,"variant","contained"),Object(je.a)(t,"component","span"),Object(je.a)(t,"children","\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u307e\u3059"),t))}),Object(h.jsx)(xe,{className:A.textAreaText,multiline:!0,variant:"outlined",rows:5,value:o,onValueChange:E,showError:_,validators:[ge]}),Object(h.jsxs)(Me.a,{className:A.confirm,children:[Object(h.jsx)(lt.a,{value:r,onChange:function(e){return b(e.target.checked)}}),Object(h.jsx)(Ve.a,{children:"\u627f\u8a8d"})]})]}),Object(h.jsx)(Qe.a,{className:A.rightSide,children:Object(h.jsx)(Qt,{})})]}),Object(h.jsx)(rt.a,{className:A.saveButton,onClick:function(){o?s?(w(!1),re.sharedDialog.sendReport(O,{comment:o,tagIds:S,clsIds:f,childIds:v,textTags:T,tagKind:s}).then((function(e){p(a),x(),m(null),R.push(d.EVENTS_LIST_PAGE)})).catch((function(e){return console.error(e)}))):B(!0):w(!0)},"aria-label":"save",children:Object(h.jsx)(at.a,{})}),Object(h.jsx)(Ht,{open:k,onClose:B,title:"",text:"\u5b9b\u5148\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093"})]})},Wt=Object(a.memo)(Ut),Kt=Object(r.a)(Object(r.a)({},Fe),{},{setSelectedEvents:K,resetSelectedData:Z,addEvent:j}),Xt=Object(o.b)((function(e){var t,n,a,i,s,c,r,o;return{description:e.shareReports.get("description"),image:e.shareReports.get("image"),approve:e.shareReports.get("approve"),destination:e.shareReports.get("destination"),tags:e.shareReports.get("tags"),gardenId:e.common.get("gardenId"),tagIds:null===(t=e.selectedEvents.get("tagIds"))||void 0===t?void 0:t.toJS(),textTags:null===(n=e.selectedEvents.get("textTags"))||void 0===n?void 0:n.toJS(),clsIds:null===(a=e.selectedEvents.get("clsIds"))||void 0===a?void 0:a.toJS(),childIds:null===(i=e.selectedEvents.get("childIds"))||void 0===i?void 0:i.toJS(),newEvent:{docRec:{id:"",gardenId:e.common.get("gardenId"),dateTime:e.common.get("timeFilter"),comment:e.shareReports.get("description"),mediaSha256:e.shareReports.get("image"),mediaType:e.shareReports.get("image"),remarks:"",effectiveFrom:null,effectiveUntil:null,createdUsrId:null,lastModified:null,lastModifiedUsrId:null,approved:e.shareReports.get("approve")},maybeAdminTag:[],maybeAppliTag:[],tags:null===(s=e.selectedEvents.get("tagIds"))||void 0===s?void 0:s.toJS(),textTags:null===(c=e.selectedEvents.get("textTags"))||void 0===c?void 0:c.toJS(),clsTags:null===(r=e.selectedEvents.get("clsIds"))||void 0===r?void 0:r.toJS(),childTags:null===(o=e.selectedEvents.get("childIds"))||void 0===o?void 0:o.toJS(),staffId:null,staffName:"",purchased:""}}}),Kt)((function(e){return Object(h.jsx)(Wt,Object(r.a)({},e))})),Zt=function(e){e.eventsList;var t=e.setEventsListData,n=e.isTagDialogShown,i=e.showTagsDialog,s=e.setGardenId,c=e.setGardenName;e.gardenId;return Object(a.useEffect)((function(){re.garden.getGardenId().then((function(e){s(e.data[0].id),c(e.data[0].name),function(e){re.eventsList.getEventsList(e,{clsId:null,childId:null,from:B(new Date,"-"),to:B(new Date,"-"),text:null,generalTagIds:[],staffId:null,limit:20,offset:0,isApproved:null}).then((function(e){return t(e.data)})).catch((function(e){return console.error(e)}))}(e.data[0].id)})).catch((function(e){return console.error(e)}))}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{exact:!0,path:d.EVENTS_LIST_PAGE,children:Object(h.jsx)(pe,{})}),Object(h.jsx)(l.a,{exact:!0,path:d.EDIT_REPORTS,children:Object(h.jsx)(ke,{})}),Object(h.jsx)(l.a,{exact:!0,path:d.PREVIEW_LiST_PAGE,children:Object(h.jsx)($e,{})})]}),Object(h.jsx)(Xt,{open:n,handleClose:function(){return i(!1)}})]})},Yt=Object(a.memo)(Zt),qt=Object(r.a)({setEventsListData:p},_e),$t=Object(o.b)((function(e){var t;return{eventsList:null===(t=e.eventsList.get("events"))||void 0===t?void 0:t.toJS(),gardenId:e.common.get("gardenId"),isTagDialogShown:e.common.get("isTagDialogShown")}}),qt)((function(e){return Object(h.jsx)(Yt,Object(r.a)({},e))})),en=n(174),tn=Object(en.a)(),nn=n(134),an=n(19),sn=new an.a.Record({docRec:{id:"",gardenId:"",dateTime:"",comment:"",mediaSha256:null,mediaType:"",remarks:"",effectiveFrom:"",effectiveUntil:"",createdUsrId:"",lastModified:"",lastModifiedUsrId:"",approved:!1},maybeAdminTag:[],maybeAppliTag:[],tags:[],textTags:[],clsTags:[],childTags:[],staffId:null,staffName:"",purchased:""}),cn=function(e){return function(t){return new an.a.List(t.map((function(t){return new e(t)})))}},rn=new an.a.OrderedMap({events:new an.a.List,groups:[]}),on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.SET_EVENTS:return e.set("events",cn(sn)(t.payload.events));case u.ADD_EVENT:var n=e.get("events").unshift(t.payload.event);return e.set("events",cn(sn)(n));case u.DELETE_EVENT:return e.update("events",(function(e){return e.filter((function(e){return e.docRec.id!==t.payload.eventID}))}));case u.SET_GARDEN_GROUPS:return e.set("groups",t.payload.groups);default:return e}},ln=new an.a.Record({day:B(new Date)}),dn=new an.a.OrderedMap({timeFilter:new ln,gardenId:"",gardenName:"",isTagDialogShown:!1}),un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce.SET_TIME_FILTER:return e.setIn(["timeFilter","day"],B(t.payload.timeFilter));case Ce.SET_GARDEN_ID:return e.set("gardenId",t.payload.gardenId);case Ce.SET_GARDEN_NAME:return e.set("gardenName",t.payload.gardenName);case Ce.SHOW_TAGS_DIALOG:return e.set("isTagDialogShown",t.payload.isShown);default:return e}},pn=new an.a.Record({id:"",name:""}),jn=function(e){return function(t){return new an.a.List(t.map((function(t){return new e(t)})))}},gn=new an.a.OrderedMap({reports:new an.a.List,creators:new an.a.List}),bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we.SET_REPORTS:return e.set("reports",new an.a.List(t.payload.reports));case we.SET_CREATORS:return e.set("creators",new an.a.List(t.payload.creators));case we.ADD_CREATOR:return e.update("creators",(function(e){return jn(pn)(e.push(t.payload.creator))}));default:return e}},En=new an.a.Record({parent:{id:"",name:"",kind:""},children:[]}),hn=function(e){return function(t){return new an.a.List(t.map((function(t){return new e(t)})))}},mn=new an.a.OrderedMap({image:null,description:"",approve:!1,destination:"",clsChildTags:null,generalTags:null,tags:new an.a.List([]),textTags:new an.a.List([]),tagIds:new an.a.List([]),clsIds:new an.a.List([]),childIds:new an.a.List([])}),On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Be.SET_IMAGE:return e.set("image",t.payload.image);case Be.SET_DESCRIPRTION:return e.set("description",t.payload.description);case Be.SET_APPROVE:return e.set("approve",t.payload.approve);case Be.SET_DESTINATION:return e.set("destination",t.payload.destination);case Be.SET_CHILD_TAGS:return e.set("clsChildTags",hn(En)(t.payload.kids));case Be.SET_GENERAL_TAGS:return e.set("generalTags",hn(En)(t.payload.tags));case Be.SET_TAG:return e.update("tags",(function(e){return e.includes(t.payload.tag)?e.filter((function(e){return e!==t.payload.tag})):e.push(t.payload.tag)}));default:return e}},xn=function(e){return function(t){return new an.a.List(t.map((function(t){return new e(t)})))}},fn=new an.a.OrderedMap({selects:new an.a.List,selectCreator:"",title:"",description:"",bgColor:Ee[0],textTags:new an.a.List([]),tagIds:new an.a.List([]),clsIds:new an.a.List([]),childIds:new an.a.List([])}),vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.SET_SELECTED:return e.set("selects",xn(sn)(t.payload.selects));case W.ADD_SELECTED_EVENT:return e.update("selects",(function(e){return xn(sn)(e.push(t.payload.event))}));case W.REMOVE_SELECTED_EVENT:return e.update("selects",(function(e){return e.filter((function(e){return e.docRec.id!=t.payload.eventID}))}));case W.EDIT_EVENT:return e.update("selects",(function(e){return e.map((function(e){return e.docRec.id===t.payload.eventId?e.setIn(["docRec","comment"],t.payload.eventDescription):e}))}));case W.ADD_TAG:return e.update("textTags",(function(e){return e.push(t.payload.tag)}));case W.SELECT_TAG_ID:return e.update("tagIds",(function(e){return e.includes(t.payload.tagId)?e.filter((function(e){return e!==t.payload.tagId})):e.push(t.payload.tagId)}));case W.SELECT_CLASS_ID:return e.update("clsIds",(function(e){return e.includes(t.payload.classId)?e.filter((function(e){return e!==t.payload.classId})):e.push(t.payload.classId)}));case W.SELECT_CHILD_ID:return e.update("childIds",(function(e){return e.includes(t.payload.childId)?e.filter((function(e){return e!==t.payload.childId})):e.push(t.payload.childId)}));case W.SET_TITLE:return e.set("title",t.payload.title);case W.SET_COLOR:return e.set("bgColor",t.payload.bgColor);case W.SET_REPORT_COMMENT:return e.set("description",t.payload.description);case W.SELECT_CREATOR:return e.set("selectCreator",t.payload.creator);case W.RESET_SELECTED_DATA:return fn;default:return e}},Tn=Object(nn.a)({common:un,eventsList:on,reportsList:bn,shareReports:On,selectedEvents:vn}),Sn=Object(nn.b)(Tn,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),An=n(269),yn=n(176),Rn=Object(yn.a)({palette:{primary:{main:"#00AE00",contrastText:"#fff"},secondary:{main:"#AE0000",contrastText:"#fff"}}});c.a.render(Object(h.jsx)(q.a,{basename:"/JPERP-web",history:tn,children:Object(h.jsx)(o.a,{store:Sn,children:Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(An.a,{theme:Rn,children:Object(h.jsx)($t,{})})})})}),document.getElementById("root"))}},[[241,1,2]]]);
//# sourceMappingURL=main.a418fdc2.chunk.js.map